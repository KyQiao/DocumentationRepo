<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="FFmpeg使用说明">
<meta property="og:type" content="article">
<meta property="og:title" content="FFmpeg Note">
<meta property="og:url" content="http://yoursite.com/2020/04/15/FFmpeg/FFmpeg%20Note/index.html">
<meta property="og:site_name" content="Documentation Repo">
<meta property="og:description" content="FFmpeg使用说明">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img-blog.csdn.net/20140201120523046?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/YUV_UV_plane.png/305px-YUV_UV_plane.png">
<meta property="og:image" content="https://bitmovin.com/wp-content/themes/Bitmovin-V-0.1/images/codec-timeline-short.png">
<meta property="article:published_time" content="2020-04-15T06:12:44.000Z">
<meta property="article:modified_time" content="2020-04-24T13:15:44.148Z">
<meta property="article:author" content="KY">
<meta property="article:tag" content="tutorial">
<meta property="article:tag" content="reference">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdn.net/20140201120523046?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">

<link rel="canonical" href="http://yoursite.com/2020/04/15/FFmpeg/FFmpeg%20Note/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>FFmpeg Note | Documentation Repo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Documentation Repo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/15/FFmpeg/FFmpeg%20Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KY">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Documentation Repo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          FFmpeg Note
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-15 14:12:44" itemprop="dateCreated datePublished" datetime="2020-04-15T14:12:44+08:00">2020-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-24 21:15:44" itemprop="dateModified" datetime="2020-04-24T21:15:44+08:00">2020-04-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/FFmpeg/" itemprop="url" rel="index"><span itemprop="name">FFmpeg</span></a>
                </span>
            </span>

          
            <div class="post-description">FFmpeg使用说明</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1>FFmpeg Note</h1>
<p>Most of the contents come from Internet,e.g. blog<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>, FFmpeg official website<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> and GitHub.</p>
<h2 id="Basic-Knowledge"><a class="header-anchor" href="#Basic-Knowledge">¶</a>Basic Knowledge</h2>
<p>流媒体播放的基本步骤如图所示：</p>
<p><img src="https://img-blog.csdn.net/20140201120523046?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVpeGlhb2h1YTEwMjA=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p>
<p>​	其中视频压缩，解码部分对我们比较重要。与此图相关的基础知识可参见此blog<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>.</p>
<h3 id="Some-other-reference"><a class="header-anchor" href="#Some-other-reference">¶</a>Some other reference</h3>
<p><a href="https://blog.csdn.net/coloriy/article/details/50623874" target="_blank" rel="noopener">FFmpeg 中的一些参数意义</a></p>
<h3 id="Terms-sup-id-fnref-4-a-href-fn-4-rel-footnote-4-a-sup"><a class="header-anchor" href="#Terms-sup-id-fnref-4-a-href-fn-4-rel-footnote-4-a-sup">¶</a>Terms<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup></h3>
<h4 id="mux-demux"><a class="header-anchor" href="#mux-demux">¶</a>mux &amp; demux</h4>
<p>​	Short for  multiplexing and demultiplexing.</p>
<p>​	把不同的流按照某种容器的规则放入容器，这种行为叫做复用（mux）。</p>
<p>​	把不同的流从某种容器中解析出来，这种行为叫做解复用(demux)。</p>
<p>​	e.g. FFmpeg使用的库为 <code>Lavf58.20.100</code>. 负责合成不同格式的视频。</p>
<h3 id="codec"><a class="header-anchor" href="#codec">¶</a>codec</h3>
<p>​	codec is short for <strong>COde &amp; DECode</strong> ,即编码与解码。</p>
<p>​	有关 codec 实现的比较，**参见 <a href="https://en.wikipedia.org/wiki/Comparison_of_video_codecs" target="_blank" rel="noopener">wiki</a> 。**其中列出了常见的codec lib 以及支持的格式。</p>
<h4 id="MPEG-4"><a class="header-anchor" href="#MPEG-4">¶</a>MPEG-4</h4>
<p>​	由 MPEG 提出的一套标准，内容囊括视频音频的编码、传输等。各个组织对其有不同实现。其中第十部分“高级视频编码”（Advanced Video Coding，AVC）与ITU-T H.264 标准一致并定义了视频编解码器，故共称 “H.264/MPEG-4 AVC” 。</p>
<p>​	详见wiki：<a href="https://zh.wikipedia.org/wiki/MPEG-4" target="_blank" rel="noopener">MPEG-4</a>、<a href="https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC" target="_blank" rel="noopener">H.264/MPEG-4 AVC</a>。</p>
<h4 id="PowerPoint-支持"><a class="header-anchor" href="#PowerPoint-支持">¶</a>PowerPoint 支持</h4>
<p>​	<strong>In a nutshell, 装上解码器然后使用H265 编码。</strong></p>
<p>​	<strong>或者使用h264。</strong></p>
<p>​	<strong>但是只能使用 yuv420p 格式。</strong></p>
<p>​	Win10原生支持h264 yuv420p，但是不支持yuv444。</p>
<p>​	简单来说，微软原生支持的解码格式与系统自带的 Windows Media Player 一致，因为二者共用系统自带的编解码器。</p>
<p>​	通过 Windows Media Player 的帮助选项可以查看支持的编解码选项。 从PPT2010 开始，微软声称提供 H.264 编解码支持， 但事实上原生系统对 libx264 并不支持，仅支持MPEG-4 part2 与微软开发的标准。对 H.264 的支持需要下载解码器，对于用户而言，这显然极不方便。</p>
<p>​	从win 7 开始 WMP 即是 12.0版本。通过 <a href="https://support.microsoft.com/zh-cn/help/15070/windows-media-player-codecs-frequently-asked-questions" target="_blank" rel="noopener">官方文档</a> 查看电脑上支持的编解码器。以下是win10 原生系统对视频的编解码支持：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>格式</th>
<th>二进制</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>ICM</td>
<td>Cinepak Codec by Radius</td>
<td>cvid <strong>(cinepak)</strong></td>
<td>iccvid.dll</td>
<td>1.10.0.12</td>
</tr>
<tr>
<td>ICM</td>
<td>Intel IYUV 编码解码器</td>
<td>IYUV</td>
<td>iyuv_32.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>ICM</td>
<td>Microsoft RLE</td>
<td>MRLE <strong>(old thing)</strong></td>
<td>msrle32.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>ICM</td>
<td>Microsoft Video 1</td>
<td>MSVC <strong>(old thing)</strong></td>
<td>msvidc32.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>ICM</td>
<td>Microsoft YUV</td>
<td>UYVY <strong>(old thing)</strong></td>
<td>msyuv.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>ICM</td>
<td>Toshiba YUV Codec</td>
<td>Y411 <strong>(old thing)</strong></td>
<td>tsbyuv.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>ICM</td>
<td>Microsoft YUV</td>
<td>UYVY <strong>(old thing)</strong></td>
<td>msyuv.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>Mpeg4s Decoder DMO</td>
<td>mp4s, MP4S, m4s2, M4S2, MP4V, mp4v, XVID, xvid, DIVX, DX50 <strong>(MPEG-4 part2)</strong></td>
<td>mp4sdecd.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>WMV Screen decoder DMO</td>
<td>MSS1, MSS2 <strong>(For screen cast)</strong></td>
<td>wmvsdecd.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>WMVideo Decoder DMO</td>
<td>WMV1, WMV2, WMV3, WMVA, WVC1, WMVP, WVP2, VC1S</td>
<td>wmvdecod.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>Mpeg43 Decoder DMO</td>
<td>mp43, MP43 <strong>(MPEG4 v3)</strong> <a href="https://docs.microsoft.com/en-us/windows/win32/medfound/windowsmediampeg4decoder" target="_blank" rel="noopener">ref</a></td>
<td>mp43decd.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>Mpeg4 Decoder DMO</td>
<td>MPG4, mpg4, mp42, MP42 <strong>(MPEG4 v1/v2)</strong> <a href="https://www.moviecodec.com/solutions/mpg4-mp42-mp43-microsoft-mpeg-4-versions-1-2-and-3-5098/" target="_blank" rel="noopener">ref</a></td>
<td>mpg4decd.dll</td>
<td>10.0.18980.1</td>
</tr>
</tbody>
</table>
<p>​	对于微软自行开发的 codec ，可参见 wiki (<a href="https://zh.wikipedia.org/wiki/Windows_Media_Video" target="_blank" rel="noopener">zh</a>/<a href="https://en.wikipedia.org/wiki/Windows_Media_Video" target="_blank" rel="noopener">en</a>)。DMO(DirectX Media Objects)，ICM(需要查证)。微软现在使用的格式是 <a href="https://docs.microsoft.com/zh-cn/windows/win32/medfound/about-mfts" target="_blank" rel="noopener">MFT</a> 。</p>
<p>​	其中，WMV 和 ASF 格式一样也是微软的一种流媒体格式。和ASF格式相比，WMV是前者的升级版本，WMV格式的体积非常小，因此很适合在网上播放和传输。在文件质量相同的情况下，WMV格式的视频文件比ASF拥有更小的体积。从WMV7开始，微软的视频方面开始脱离MPEG组织，并且与MPEG-4不兼容，成为了独立的一个编解码系统。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -hide_banner -codecs -&gt; ffmpeg-codec.txt</span><br><span class="line"></span><br><span class="line">cat ffmpeg-codec.txt |grep wmv</span><br><span class="line"> DEV.L. wmv1                 Windows Media Video 7</span><br><span class="line"> DEV.L. wmv2                 Windows Media Video 8</span><br><span class="line"> D.V.L. wmv3                 Windows Media Video 9</span><br><span class="line"> D.V.L. wmv3image            Windows Media Video 9 Image</span><br><span class="line"></span><br><span class="line">cat ffmpeg-codec.txt |grep vc1</span><br><span class="line"> D.VIL. mvc1                 Silicon Graphics Motion Video Compressor 1</span><br><span class="line"> D.V.L. vc1                  SMPTE VC-1 (decoders: vc1 vc1_qsv vc1_cuvid )</span><br><span class="line"> D.V.L. vc1image             Windows Media Video 9 Image v2</span><br><span class="line"> </span><br><span class="line">ffmpeg -codecs -hide_banner |grep mpeg4</span><br><span class="line"> DEV.L. mpeg4                MPEG-4 part 2 (decoders: mpeg4 mpeg4_cuvid ) (encoders: mpeg4 libxvid )</span><br><span class="line"> D.V.L. msmpeg4v1            MPEG-4 part 2 Microsoft variant version 1</span><br><span class="line"> DEV.L. msmpeg4v2            MPEG-4 part 2 Microsoft variant version 2</span><br><span class="line"> DEV.L. msmpeg4v3            MPEG-4 part 2 Microsoft variant version 3 (decoders: msmpeg4 ) (encoders: msmpeg4 )</span><br></pre></td></tr></table></figure>
<p>wmv1-3 以及 vc1 FFmpeg 均能提供。但是只有解码，因此剩下的选项只能是 MPEG-4 part2 或者MPEG-4 v3，wmv1-2，以及一些十分古老的格式。FFmpeg 在未来提供 vc1 支持的可能性很小，因为 vc1 完全可以被 H.264 取代。</p>
<p>​	PPT 对容器的支持比较全面，详见 <a href="https://support.office.com/zh-cn/article/powerpoint-%e6%94%af%e6%8c%81%e7%9a%84%e8%a7%86%e9%a2%91%e5%92%8c%e9%9f%b3%e9%a2%91%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f-d8b12450-26db-4c7b-a5c1-593d3418fb59?omkt=zh-CN&amp;ui=zh-CN&amp;rs=zh-CN&amp;ad=CN" target="_blank" rel="noopener">A list of PPT supported formats</a> 。一般来说，MP4, WMV, AVI 格式均可。</p>
<h4 id="Codec-for-windows"><a class="header-anchor" href="#Codec-for-windows">¶</a>Codec for windows</h4>
<p>​	由于版权原因，微软未提供许多codec。在win10中，微软在应用商店里提供了VP8/9以及其他的解码器，以及藏得很深的HEVC解码器。</p>
<p>​	有两种办法解决这个问题。</p>
<h5 id="K-Lite-codec-package"><a class="header-anchor" href="#K-Lite-codec-package">¶</a>K-Lite codec package</h5>
<p>​	windows上著名的codec插件，在官网下载basic版即可，安装时与WMP关联。之后可以看到系统中多出了codec库：</p>
<p>​	<a href="https://codecguide.com/download_k-lite_codec_pack_basic.htm" target="_blank" rel="noopener">下载地址</a></p>
<blockquote>
<h3 id="MPEG-DVD-筛选器"><a class="header-anchor" href="#MPEG-DVD-筛选器">¶</a>MPEG/DVD 筛选器</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>二进制</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>video</td>
<td>LAV Video Decoder</td>
<td><a href="http://LAVVideo.ax" target="_blank" rel="noopener">LAVVideo.ax</a></td>
<td>0.74.1.24</td>
</tr>
<tr>
<td>video</td>
<td>Microsoft DTV-DVD Video Decoder</td>
<td>msmpeg2vdec.dll</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>audio</td>
<td>LAV Audio Decoder</td>
<td><a href="http://LAVAudio.ax" target="_blank" rel="noopener">LAVAudio.ax</a></td>
<td>0.74.1.24</td>
</tr>
<tr>
<td>audio</td>
<td>Microsoft DTV-DVD Audio Decoder</td>
<td>msmpeg2adec.dll</td>
<td>10.0.18980.1</td>
</tr>
</tbody>
</table>
</blockquote>
<p>​	LAVFilters 的官方 <a href="https://github.com/Nevcairiel/LAVFilters/releases" target="_blank" rel="noopener">GitHub</a> 。这是基于FFmpeg 的解码器，但是很奇怪的是 LAVFilters <strong>并不支持H.264 High 4:4:4 profile</strong>（其余profile均可）。也就是说只要码率不是太小，现在都能放进PPT里了。</p>
<h5 id="HEVC-视频拓展"><a class="header-anchor" href="#HEVC-视频拓展">¶</a>HEVC 视频拓展</h5>
<p>下载链接藏在 <a href="https://www.microsoft.com/zh-cn/p/hevc-video-extensions-from-device-manufacturer/9n4wgh0z6vhq?activetab=pivot:overviewtab" target="_blank" rel="noopener">这里</a> 。直接在商店中查找只能得到付费版本。</p>
<p><a href="https://www.windows10.pro/heif-image-extensions-hevc-video-extensions/" target="_blank" rel="noopener">备用地址</a></p>
<h5 id="Note"><a class="header-anchor" href="#Note">¶</a>Note</h5>
<p><strong>Microsoft supports VP8/9 in win10, although VP9 codec is buggy.</strong></p>
<p><strong>Apple’s keynote supports HEVC and H.264 but not VP9.</strong></p>
<h4 id="MPEG-4-标准实现"><a class="header-anchor" href="#MPEG-4-标准实现">¶</a>MPEG-4  标准实现</h4>
<p>​	FFmpeg 所支持的codec可以在 <a href="https://www.ffmpeg.org/ffmpeg-codecs.html" target="_blank" rel="noopener">这</a> 找到。常见的视频编码库有：</p>
<ol>
<li>libx264 现行最优秀的编码器，<a href="https://blog.csdn.net/leixiaohua1020/article/details/12373947" target="_blank" rel="noopener">bencmark here</a> . 也是FFmpeg 的默认选择。参数调整参看 <a href="https://trac.ffmpeg.org/wiki/Encode/H.264" target="_blank" rel="noopener">官方文档</a> 或其 <a href="https://blog.csdn.net/leixiaohua1020/article/details/12720135" target="_blank" rel="noopener">中文翻译</a> 。也可参考 <a href="https://slhck.info/video/2017/02/24/crf-guide.html" target="_blank" rel="noopener">ref</a> 。</li>
<li>libxvid FFmpeg MPEG4 ASP 格式默认编码库。其参数调整参看<a href="https://trac.ffmpeg.org/wiki/Encode/MPEG-4" target="_blank" rel="noopener">官方文档</a>。</li>
</ol>
<h3 id="Pixel-format-sup-id-fnref-5-a-href-fn-5-rel-footnote-5-a-sup"><a class="header-anchor" href="#Pixel-format-sup-id-fnref-5-a-href-fn-5-rel-footnote-5-a-sup">¶</a>Pixel format<sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup></h3>
<h4 id="yuv420p"><a class="header-anchor" href="#yuv420p">¶</a>yuv420p</h4>
<p>​	原是用于电视信号的像素格式，现也常用于PC。Y表示灰度值，UV表示颜色分量。</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/YUV_UV_plane.png/305px-YUV_UV_plane.png" alt="img"></p>
<p>​	420代表信号的采样方式，常见的还有444，422。420表示每四个灰度像素点共用一组UV分量。<sup id="fnref:7"><a href="#fn:7" rel="footnote">7</a></sup></p>
<h4 id="pal8"><a class="header-anchor" href="#pal8">¶</a>pal8</h4>
<p>​	raw video所使用的格式。单通道8bits，与灰度图无异。FFmpeg并不支持输出这种格式，可选用 <code>gray</code> 格式代替。<sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup></p>
<h2 id="FFmpeg-basic"><a class="header-anchor" href="#FFmpeg-basic">¶</a>FFmpeg basic</h2>
<p>​	在使用 FFmpeg 之前，了解必要的音视频知识是必要的。如果对某些选项有疑问，请回到FFmpeg官网查证。</p>
<p><a href="https://xdsnet.gitbooks.io/other-doc-cn-ffmpeg/" target="_blank" rel="noopener">中文翻译文档</a> 4年前的版本，基本够用</p>
<p><a href="https://ffmpeg.org/ffmpeg.html" target="_blank" rel="noopener">官方文档（nightly）</a></p>
<p>​	FFmpeg 的二进制文件有3个（static version），分别是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg 负责大部分转码功能</span><br><span class="line">ffplay 播放程序</span><br><span class="line">ffprobe 用于查看视频信息</span><br></pre></td></tr></table></figure>
<p>​	FFmpeg 的一般命令格式为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg [global_options] &#123;[input_file_options] -i input_url&#125; ... &#123;[output_file_options] output_url&#125; ...</span><br></pre></td></tr></table></figure>
<p>​	命令组的位置不能变动，但是同一命令组里的选项可以相互调换。</p>
<h4 id="Some-facts"><a class="header-anchor" href="#Some-facts">¶</a>Some facts</h4>
<p>FFmpeg uses 0-based indices.  (first 0, second 1).</p>
<h3 id="Generic-options"><a class="header-anchor" href="#Generic-options">¶</a>Generic options</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-version 显示版本信息</span><br><span class="line">-formats 显示所有有效的格式（包括设备）</span><br><span class="line">-codecs 显示所有已支持的编码（libavcodec中的）格式</span><br><span class="line">-pix_fmts 显示有效的像素格式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">logging</span><br><span class="line">-loglevel [repeat+]loglevel 或者 -v [repeat+]loglevel：设置日志层次。如果附加有repeat+则表示从第一条非压缩行到达到最后消息n次之间的行将被忽略。<span class="string">"repeat"</span>也可以一直使用，如果没有现有日志层级设置，则采用默认日志层级。如果有多个日志层级参数被获取，使用<span class="string">"repeat"</span>不改变当前日志层级。日志层级是一个字符串或数值，有以下可能值：</span><br><span class="line"></span><br><span class="line">    quiet,-8，什么都不输出，是无声的</span><br><span class="line">    panic,0，仅显示造成进程失败的致命错误</span><br><span class="line">    fatal,8 仅仅显示致命错误，这些错误使得处理不能继续</span><br><span class="line">    error,16 显示所有的错误，包括可以回收的错误（进程还可以继续的）</span><br><span class="line">    warning,24 显示所有警告和错误，任何错误或者意外事件相关信息均被显示</span><br><span class="line">    info,32 显示过程中的信息，还包括警告和错误，则是默认值</span><br><span class="line">    verbose,40 类似info，但更冗长</span><br><span class="line">    debug,48 显示所有，包括调试信息</span><br><span class="line"></span><br><span class="line">    trace,56</span><br><span class="line"></span><br><span class="line">    默认的日志输出是stderr设备，如果在控制台支持颜色，则错误和警告标记的颜色将被显示处理，默认日志的颜色设置可以由环境变量的AV_LOG_FORCE_NOCOLOR或者NO_COLOR或者环境变量AV_LOG_RORCE_COLOR覆盖。环境变量NO_COLOR不推荐使用，因为其已经不被新版本支持。</span><br><span class="line">    </span><br><span class="line">-hide_banner 禁止打印输出banner。所有FFmpeg工具使用中常规都会在前面显示一些版权通知、编译选项和库版本等，这个选项可以禁止这部分的显示。</span><br><span class="line"></span><br><span class="line">-stats （global）：输出编码过程／统计，这是系统默认值，如果你想禁止，则需要采用－nostats。</span><br><span class="line"></span><br><span class="line">https://xdsnet.gitbooks.io/other-doc-cn-ffmpeg/ffmpeg-doc-cn-05.html</span><br></pre></td></tr></table></figure>
<h3 id="Main-options"><a class="header-anchor" href="#Main-options">¶</a>Main options</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-f fmt (input/output) :指定输入或者输出文件格式。常规可省略而使用依据扩展名的自动指定，但一些选项需要强制明确设定</span><br><span class="line">-i filename （input）：指定输入文件</span><br><span class="line">-y （global）：默认自动覆盖输出文件，而不再询问确认。</span><br><span class="line">-n (global):不覆盖输出文件，如果输出文件已经存在则立即退出</span><br><span class="line"></span><br><span class="line">视频剪辑</span><br><span class="line"></span><br><span class="line">-t duration (input/output):限制输入/输出的时间。如果是在-i前面，就是限定从输入中读取多少时间的数据；如果是用于限定输出文件，则表示写入多少时间数据后就停止。duration可以是以秒为单位的数值或者 hh:mm:ss[.xxx]格式的时间值。 注意-to和-t是互斥的，-t有更高优先级。</span><br><span class="line">-to position (output):只写入position时间后就停止，position可以是以秒为单位的数值或者 hh:mm:ss[.xxx]格式的时间值。 注意-to和-t是互斥的，-t有更高优先级。</span><br><span class="line">-ss position (input/output):</span><br><span class="line"></span><br><span class="line">    当在-i前，表示定位输入文件到position指定的位置。注意可能一些格式是不支持精确定位的，所以ffmpeg可能是定位到最接近position（在之前）的可定位点。当有转码发生且-accurate_seek被设置为启用（默认），则实际定位点到position间的数据被解码出来但丢弃掉。如果是复制模式或者-noaccurate_seek被使用，则这之间的数据会被保留。</span><br><span class="line"></span><br><span class="line">    当用于输出文件时，会解码丢弃position对应时间码前的输入文件数据。</span><br><span class="line">    position可以是以秒为单位的数值或者 hh:mm:ss[.xxx]格式的时间值</span><br><span class="line"></span><br><span class="line">-itsoffset offset (input):设置输入文件的时间偏移。offset必须采用时间持续的方式指定，即可以有-号的时间值（以秒为单位的数值或者 hh:mm:ss[.xxx]格式的时间值）。偏移会附加到输入文件的时间码上，意味着所指定的流会以时间码+偏移量作为最终输出时间码。</span><br></pre></td></tr></table></figure>
<h3 id="Video-options"><a class="header-anchor" href="#Video-options">¶</a>Video options</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">-vframes number (output)：设置输出文件的帧数，是-frames:v的别名。</span><br><span class="line"></span><br><span class="line">-r[:stream_specifier] fps (input/output,per-stream)：设置帧率（一种Hz值，缩写或者分数值）。</span><br><span class="line"> 在作为输入选项时，会忽略文件中存储的时间戳和时间戳而产生的假设恒定帧率fps，即强制按设定帧率处理视频产生（快进/减缓效果）。这不像-framerate选项是用来让一些输入文件格式如image2或者v412(兼容旧版本的FFmpeg)等，要注意这一点区别，而不要造成混淆。</span><br><span class="line"></span><br><span class="line">作为输出选项时，会复制或者丢弃输入中个别的帧以满足设定达到fps要求的帧率。</span><br><span class="line"></span><br><span class="line">-s[:stream_specifier] size (input/output,per-stream)：设置帧的尺寸。</span><br><span class="line"> 当作为输入选项时，是私有选项video_size的缩写，一些文件没有把帧尺寸进行存储，或者设备对帧尺寸是可以设置的，例如一些采集卡或者raw视频数据。</span><br><span class="line"></span><br><span class="line">当作为输出选项是，则相当于scale滤镜作用在滤镜链图的最后。请使用scale滤镜插入到开始或者其他地方。</span><br><span class="line"></span><br><span class="line">数据的格式是wxh，即宽度值X高度值，例如320x240，（默认同源尺寸）</span><br><span class="line">-vn (output)：禁止输出视频</span><br><span class="line">-an (output)：禁止输出音频</span><br><span class="line">-vcodec codec (output)：设置视频编码器，这是-codec:v的一个别名。</span><br><span class="line"></span><br><span class="line">-pass[:stream_specifier] n (output,per-stream):选择当前编码数(1或者2)，它通常用于2次视频编码的场景。第一次编码通常把分析统计数据记录到1个日志文件中（参考-passlogfile选项），然后在第二次编码时读取分析以精确要求码率。在第一次编码时通常可以禁止音频，并且把输出文件设置为null，在windows和类unix分别是:</span><br><span class="line"></span><br><span class="line">    ffmpeg -i foo.mov -c:v libxvid -pass 1 -an -f rawvideo -y NUL </span><br><span class="line">    ffmpeg -i foo.mov -c:v libxvid -pass 1 -an -f rawvideo -y /dev/null</span><br><span class="line"></span><br><span class="line">-vf filtergraph (output)：创建一个filtergraph的滤镜链并作用在流上。它实为-filter:v的别名，详细参考-filter选项。</span><br><span class="line">-pix_fmt[:stream_specifier] format (input/output,per-stream)：设置像素格式。</span><br></pre></td></tr></table></figure>
<h2 id="Common-commands"><a class="header-anchor" href="#Common-commands">¶</a>Common commands</h2>
<p>全局选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg</span><br><span class="line">	-y\</span><br><span class="line">	-hide_banner\</span><br><span class="line">	-loglevel panic\</span><br><span class="line">	-i ...\</span><br><span class="line">	-nostat\</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>
<h3 id="Images"><a class="header-anchor" href="#Images">¶</a>Images</h3>
<p>Common format for images are:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">png: lossless and can be used from Libpng.</span><br><span class="line">tiff: lossless and lossy. </span><br><span class="line">jpeg: lossy and fast.</span><br><span class="line">jpeg2000: better than jpeg but not widely applied.</span><br></pre></td></tr></table></figure>
<p>Convert images into video</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg\</span><br><span class="line">	-start_number 1551\ 从001551.png开始</span><br><span class="line">	-i .\%6d.png\</span><br><span class="line">	-c:v libx264\ 默认使用H.264格式，如无需压缩，使用 rawvideo 编码。</span><br><span class="line">	-preset veryslow\</span><br><span class="line">	-crf 18\ 默认23 <span class="keyword">for</span> 8 bits image</span><br><span class="line">	-pix_fmt yuv420p\</span><br><span class="line">	-b:v 400k\ 码率控制，默认200k</span><br><span class="line">	OUTPUT</span><br></pre></td></tr></table></figure>
<p>Convert video into image</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg\</span><br><span class="line">	-i INPUT\</span><br><span class="line">	-ss 5\ 从第5秒开始</span><br><span class="line">	-t  10\ 输出时间为10秒</span><br><span class="line">	(-to 10) \ 到第10秒结束</span><br><span class="line">    -r 25\ 指定输出帧率，默认全部输出</span><br><span class="line">    -pix_fmt gray\ 一般只需要灰度图</span><br><span class="line">    %6d.tif</span><br></pre></td></tr></table></figure>
<h3 id="Video"><a class="header-anchor" href="#Video">¶</a>Video</h3>
<p><strong>Note H.264 does not support gray pixel format and 16 bits.</strong></p>
<p>转码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg \</span><br><span class="line">	-i INPUT \</span><br><span class="line">	-c:v libx264\</span><br><span class="line">    -preset veryslow\</span><br><span class="line">    -pix_fmt yuv420p\</span><br><span class="line">    -crf 28 \</span><br><span class="line">    OUTPUT</span><br></pre></td></tr></table></figure>
<p>无损H.264</p>
<p>set crf=0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input -c:v libx264 -preset ultrafast -crf 0 -pix_fmt yuv420p output.mkv</span><br><span class="line"></span><br><span class="line">ffmpeg -i input -c:v libx264 -preset veryslow -crf 0 -pix_fmt yuv420p output.mkv</span><br></pre></td></tr></table></figure>
<p>Profile level</p>
<p><code>baseline</code>, <code>main</code>, <code>high</code>, <code>high10</code>, <code>high422</code>, <code>high444</code></p>
<p>​	As long as the bit rate is not too low, FFmpeg won’t use high444, such that you can use H.264 in PPT with codecs.</p>
<p>Two-pass</p>
<p>To generate a file with targeted size. E.g. Compress video into a 10MB video. If the video have length 10s, the average bit rate is :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10MiB x 8192[converts MiB to kBit]) / 10 seconds = 8192 kBit/s total bitrate</span><br><span class="line">subtracte the audio bit rate <span class="keyword">if</span> needed.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>8Mbps is obviously too large for a 10 second video. Common guideline for bitrate is list as follow(from YouTube):</p>
<h4 id="Recommended-video-bitrates-for-SDR-uploads"><a class="header-anchor" href="#Recommended-video-bitrates-for-SDR-uploads">¶</a>Recommended video bitrates for SDR uploads</h4>
<p>To view new 4K uploads in 4K, use a browser or device that supports VP9.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Video Bitrate, Standard Frame Rate           (24, 25, 30)</th>
<th>Video Bitrate, High Frame Rate           (48, 50, 60)</th>
</tr>
</thead>
<tbody>
<tr>
<td>2160p (4k)</td>
<td>35-45 Mbps</td>
<td>53-68 Mbps</td>
</tr>
<tr>
<td>1440p (2k)</td>
<td>16 Mbps</td>
<td>24 Mbps</td>
</tr>
<tr>
<td><strong>1080p</strong></td>
<td><strong>8 Mbps</strong></td>
<td>12 Mbps</td>
</tr>
<tr>
<td><strong>720p</strong></td>
<td><strong>5 Mbps</strong></td>
<td>7.5 Mbps</td>
</tr>
<tr>
<td><strong>480p</strong></td>
<td><strong>2.5 Mbps</strong></td>
<td>4 Mbps</td>
</tr>
<tr>
<td><strong>360p</strong></td>
<td><strong>1 Mbp</strong>s</td>
<td>1.5 Mbps</td>
</tr>
</tbody>
</table>
<h4 id="Recommended-video-bitrates-for-HDR-uploads"><a class="header-anchor" href="#Recommended-video-bitrates-for-HDR-uploads">¶</a>Recommended video bitrates for HDR uploads</h4>
<table>
<thead>
<tr>
<th>Type</th>
<th>Video Bitrate, Standard Frame Rate           (24, 25, 30)</th>
<th>Video Bitrate, High Frame Rate           (48, 50, 60)</th>
</tr>
</thead>
<tbody>
<tr>
<td>2160p (4k)</td>
<td>44-56 Mbps</td>
<td>66-85 Mbps</td>
</tr>
<tr>
<td>1440p (2k)</td>
<td>20 Mbps</td>
<td>30 Mbps</td>
</tr>
<tr>
<td><strong>1080p</strong></td>
<td><strong>10 Mbps</strong></td>
<td>15 Mbps</td>
</tr>
<tr>
<td><strong>720p</strong></td>
<td><strong>6.5 Mbps</strong></td>
<td>9.5 Mbps</td>
</tr>
<tr>
<td>480p</td>
<td>Not supported</td>
<td>Not supported</td>
</tr>
<tr>
<td>360p</td>
<td>Not supported</td>
<td>Not supported</td>
</tr>
</tbody>
</table>
</blockquote>
<p>So this video can be reduced to 1.25MiB(360p 1Mbps) and still visible.</p>
<p>​	The HDR part is just for reference.</p>
<p>Linux version</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -y -i input -c:v libx264 -b:v 1000k -pass 1 -an -f mp4 /dev/null &amp;&amp; \</span><br><span class="line">ffmpeg -i input -c:v libx264 -b:v 1000k -pass 2  output.mp4</span><br></pre></td></tr></table></figure>
<p>windows version</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -y -i input -c:v libx264 -b:v 1000k -pass 1 -pix_fmt yuv420p -an -f mp4 NUL &amp;&amp; ^</span><br><span class="line">ffmpeg -i input -c:v libx264 -b:v 1000k -pass 2 -pix_fmt yuv420p output.mp4</span><br></pre></td></tr></table></figure>
<h3 id="PPT-compatible-video"><a class="header-anchor" href="#PPT-compatible-video">¶</a>PPT compatible video</h3>
<p>The compatible codecs are:</p>
<p>​	<code>mpeg4, mpeg1video, msmpeg4, wmv1, wmv2</code></p>
<p>​	These codecs are only supported in PPT. If you use mpeg1video, PPT will automatically convert the video into h.264 format, which is quite mysterious, but the quality is bad.</p>
<p>​	If you install other codecs, you can use H.265 now for both PPT and keynote.</p>
<p>​	If you convert <strong>some picture into video with h264 encoder</strong>, it works for PPT and keynote mysteriously.</p>
<p>It turns out that if you directly convert pictures into h264 video, FFmpeg will not subsample the picture, such that the profile level is low(e.g. baseline or main) and PPT can use that.</p>
<blockquote>
<p>By default when using <code>libx264</code>, and depending on your input, <code>ffmpeg</code> will attempt to avoid color subsampling. Technically this is preferred, but unfortunately almost all video players, excluding FFmpeg based  players, and many online video services only support the YUV color space with 4:2:0 chroma subsampling. Using the options <code>-pix_fmt yuv420p</code> or <code>-vf format=yuv420p</code> will maximize compatibility.</p>
<p><a href="https://trac.ffmpeg.org/wiki/Slideshow" target="_blank" rel="noopener">https://trac.ffmpeg.org/wiki/Slideshow</a></p>
</blockquote>
<h4 id="MPEG-4-v2"><a class="header-anchor" href="#MPEG-4-v2">¶</a>MPEG-4</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg\ </span><br><span class="line">	-i input\</span><br><span class="line">    -c:v mpeg4\ FFmpeg native所提供，libxvid 需要外部提供。</span><br><span class="line">    -q:v 3\ qscale number，no default value</span><br><span class="line">    -pix_fmt yuv420p\ gray?</span><br><span class="line">    output</span><br></pre></td></tr></table></figure>
<p>The suitable bit rate for MPEG-4 is list as follow:</p>
<p>Two-pass</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -y -i input.avi -c:v mpeg4 -vtag xvid -b:v 2000k -pass 1 -pix_fmt yuv420p -an -f avi /dev/null &amp;&amp; \</span><br><span class="line">ffmpeg -i input.avi -c:v mpeg4 -vtag xvid -b:v 2000k -pass 2 -pix_fmt yuv420p output.avi</span><br></pre></td></tr></table></figure>
<p>​	The bit rate <strong>cannot be too small</strong> since MPEG-4 is not that sufficient.</p>
<h4 id="H-265"><a class="header-anchor" href="#H-265">¶</a>H.265</h4>
<p>Very similar to H.264, you can use same option with only changing 264 to 265. It seems Libx265 hasn’t implement a high speed lib yet, the 265 lib compresses much slower that 264 lib. Although you can accelerate it via hardware(GPU). Hope they will improve it later.</p>
<p>General command</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg </span><br><span class="line">	-i INPUT\</span><br><span class="line">	-tag:v hvc1\ <span class="built_in">enable</span> <span class="keyword">for</span> keynote. 其实两种格式无关紧要，但是ios设备一定要这个tag。</span><br><span class="line">	-c:v libx265\</span><br><span class="line">	-pix_fmt yuv420p\ h265 采用不同的profile会给出不同的像素格式。目前（19.10.28）Win10 和 ios都只能支持yuv420p,而且h264/5 天生不支持纯灰度格式，如需灰度图可在输出时转换。</span><br><span class="line">	OUTPUT</span><br></pre></td></tr></table></figure>
<p>H265的profile与H264大不相同，具体参见其 <a href="https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding#Profiles" target="_blank" rel="noopener">wiki: h265 profile</a> 。一般来讲让FFmpeg自动选择即可。</p>
<h3 id="Filter"><a class="header-anchor" href="#Filter">¶</a>Filter</h3>
<p>添加时间戳</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg\</span><br><span class="line">	-i INPUT</span><br><span class="line">    -r 25 </span><br><span class="line">    -vf <span class="string">"drawtext=fontfile=arial.ttf:fontsize=28:fontcolor=yellow:box=1:boxcolor=0x000000CC:x=(w-tw)/2:y=h-(2*lh):timecode='00\:00\:00\:00:rate=25'"</span> </span><br><span class="line">    -vcodec libx264 </span><br><span class="line">    -vb 2000k </span><br><span class="line">    -preset ultrafast </span><br><span class="line">    OUTPUT.mp4</span><br></pre></td></tr></table></figure>
<p>FFmpeg的图像坐标默认（0，0）为左上角，x轴不变，y轴反向。w,h表示视频尺寸，tw,lh表示text尺寸。</p>
<p>改变分辨率</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i 0001_.mp4 -vf scale=1500:1000 video.mp4</span><br></pre></td></tr></table></figure>
<p>调整亮度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg\</span><br><span class="line">	-i 3_two_nuke.avi\</span><br><span class="line">	-vf eq=gamma=2:saturation=1.3\</span><br><span class="line">	-b:v 1M\</span><br><span class="line">	-pix_fmt yuv420p\</span><br><span class="line">	-c:v libx264\</span><br><span class="line">	-crf 10\</span><br><span class="line">	5_out_two_nuke.avi</span><br></pre></td></tr></table></figure>
<p>Padding the video</p>
<p>将奇数尺寸的视频变为偶数尺寸。H.264 需要偶数尺寸进行编码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg\</span><br><span class="line">	-i INPUT</span><br><span class="line">    -r 25 </span><br><span class="line">    -vf <span class="string">"pad=ceil(iw/2)*2:ceil(ih/2)*2"</span> </span><br><span class="line">    -c:v libx264 </span><br><span class="line">    -b:v 2000k </span><br><span class="line">    -pix_fmt yuv420p\</span><br><span class="line">    -preset ultrafast\</span><br><span class="line">    output.mp4</span><br></pre></td></tr></table></figure>
<p>​	Filter 是 FFmpeg 中及其复杂的功能，上述例子只是simple filter的应用，FFmpeg还存在complex filter，例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i input.mp4 -i overlay.png -filter_complex <span class="string">"[0]trim=start_frame=10:end_frame=20[v0];\</span></span><br><span class="line"><span class="string">    [0]trim=start_frame=30:end_frame=40[v1];[v0][v1]concat=n=2[v2];[1]hflip[v3];\</span></span><br><span class="line"><span class="string">    [v2][v3]overlay=eof_action=repeat[v4];[v4]drawbox=50:50:120:120:red:t=5[v5]"</span>\</span><br><span class="line">    -map [v5] output.mp4</span><br></pre></td></tr></table></figure>
<p>​	这时可以使用 ffmpeg-python 来实现复杂流程。例如调整gamma值：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i nuke_surface_2.avi -vf <span class="string">"pad=ceil(iw/2)*2:ceil(ih/2)*2,eq=gamma=2:saturation=1.3,drawtext=fontfile=arial.ttf:fontsize=28:fontcolor=yellow:box=1:boxcolor=0x000000CC:x=(w-tw)/2:y=h-(2*lh):timecode='00\:00\:00\:00:rate=49.91'"</span>  -vcodec libx264  -pix_fmt yuv420p -b:v <span class="number">1000</span>k -r <span class="number">49.91</span>   -an out.mp4</span><br><span class="line"></span><br><span class="line"><span class="keyword">is</span> equivalent to</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ffmpeg </span><br><span class="line"></span><br><span class="line">codec_para = &#123;</span><br><span class="line">    <span class="string">"c:v"</span>:<span class="string">"libx264"</span>,</span><br><span class="line">    <span class="string">"pix_fmt"</span>:<span class="string">"yuv420p"</span>,</span><br><span class="line">    <span class="string">"b:v"</span>:<span class="string">"1M"</span>,</span><br><span class="line">    <span class="string">"r"</span>:<span class="string">"49.91"</span>,</span><br><span class="line">    <span class="string">"an"</span>:<span class="literal">None</span></span><br><span class="line">&#125;</span><br><span class="line">font_para=&#123;</span><br><span class="line">    <span class="string">"box"</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">"boxcolor"</span>:<span class="string">"0x000000CC"</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="string">"fontfile"</span>:<span class="string">"arial.ttf"</span>,</span><br><span class="line">    <span class="string">"fontsize"</span>:<span class="number">28</span>,</span><br><span class="line">    <span class="string">"fontcolor"</span>:<span class="string">"yellow"</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="string">"x"</span>:<span class="string">"(w-tw)/2"</span>,</span><br><span class="line">    <span class="string">"y"</span>:<span class="string">"h-(2*lh)"</span>,</span><br><span class="line">    </span><br><span class="line">    <span class="string">"timecode"</span>:<span class="string">r"00:00:00:00"</span>,</span><br><span class="line">    <span class="string">"rate"</span>:<span class="number">49.91</span>,</span><br><span class="line">&#125;</span><br><span class="line">filter_para=&#123;&#125;</span><br><span class="line">(</span><br><span class="line">    ffmpeg</span><br><span class="line">    .input(<span class="string">"nuke_surface_2.avi"</span>)</span><br><span class="line">    .filter(<span class="string">"pad"</span>,<span class="string">"ceil(iw/2)*2"</span>,<span class="string">"ceil(ih/2)*2"</span>)</span><br><span class="line">    .filter(<span class="string">"eq"</span>,gamma=<span class="number">2</span>,saturation=<span class="number">1.3</span>)</span><br><span class="line">    .drawtext(**font_para)</span><br><span class="line">    .output(<span class="string">"ffmpeg_out.mp4"</span>,**codec_para)</span><br><span class="line">    .global_args(<span class="string">"-y"</span>,<span class="string">"-hide_banner"</span>)</span><br><span class="line">    .run()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>​	Anyway, ffmpeg-python is a powerful tool. Refer <a href="https://github.com/kkroening/ffmpeg-python" target="_blank" rel="noopener">GitHub repo</a> for more info.</p>
<h3 id="Refence-in-this-chapter"><a class="header-anchor" href="#Refence-in-this-chapter">¶</a>Refence in this chapter</h3>
<p><a href="https://wiki.fiveyellowmice.com/wiki/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8_FFmpeg_%E8%BF%9B%E8%A1%8C%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81:%E7%9B%AE%E5%BD%95" target="_blank" rel="noopener">A straightforward tutorial</a></p>
<p><a href="https://avpres.net/FFmpeg/" target="_blank" rel="noopener">FFmpeg Cookbook for Archivists</a></p>
<p><a href="https://support.google.com/youtube/answer/1722171?hl=en" target="_blank" rel="noopener">YouTube Help</a></p>
<p><a href="https://stackoverflow.com/questions/20847674/ffmpeg-libx264-height-not-divisible-by-2" target="_blank" rel="noopener">FFMPEG (libx264) “height not divisible by 2”</a></p>
<p><a href="https://trac.ffmpeg.org/wiki/Encode/H.264" target="_blank" rel="noopener">H.264 Video Encoding Guide (Official)</a> and <a href="https://blog.csdn.net/leixiaohua1020/article/details/12720135" target="_blank" rel="noopener">Chinese version</a></p>
<p><a href="https://trac.ffmpeg.org/wiki/Encode/MPEG-4" target="_blank" rel="noopener">MPEG-4 Encoding Guide (Official)</a></p>
<h2 id="Outlook"><a class="header-anchor" href="#Outlook">¶</a>Outlook</h2>
<p>除开 H.264 标准之外，也有许多厂商提出了自己的标准。</p>
<p><img src="https://bitmovin.com/wp-content/themes/Bitmovin-V-0.1/images/codec-timeline-short.png" alt="On-Premise Cloud encoding service from Bitmovin"></p>
<p>​	例如 google 的VP9 以及AOM 的 AV1 。FFmpeg 提供相应的编码器。</p>
<h2 id="Ref"><a class="header-anchor" href="#Ref">¶</a>Ref</h2>
<h2 id="Appendix"><a class="header-anchor" href="#Appendix">¶</a>Appendix</h2>
<h3 id="Windows-media-player-音频编码解码器"><a class="header-anchor" href="#Windows-media-player-音频编码解码器">¶</a>Windows media player 音频编码解码器</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>名称</th>
<th>格式</th>
<th>二进制</th>
<th>版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>ACM</td>
<td>Microsoft IMA ADPCM CODEC</td>
<td>0011</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ACM</td>
<td>Microsoft ADPCM CODEC</td>
<td>0002</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ACM</td>
<td>Microsoft CCITT G.711 A-Law and u-Law CODEC</td>
<td>0007</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ACM</td>
<td>Microsoft GSM 6.10 Audio CODEC</td>
<td>0031</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ACM</td>
<td>Fraunhofer IIS MPEG Layer-3 Codec (decode only)</td>
<td>0055</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ACM</td>
<td>Microsoft PCM Converter</td>
<td>0001</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DMO</td>
<td>WMAudio Decoder DMO</td>
<td>0160, 0161, 0162, 0163</td>
<td>WMADMOD.DLL</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>WMAPro over S/PDIF DMO</td>
<td>0162</td>
<td>WMADMOD.DLL</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>WMSpeech Decoder DMO</td>
<td>000A, 000B</td>
<td>WMSPDMOD.DLL</td>
<td>10.0.18980.1</td>
</tr>
<tr>
<td>DMO</td>
<td>MP3 Decoder DMO</td>
<td>0055</td>
<td>mp3dmod.dll</td>
<td>10.0.18980.1</td>
</tr>
</tbody>
</table>
<p>A very close question:</p>
<h3 id="Using-a-lossless-video-codec-for-archiving-monochrome-scientific-video-data"><a class="header-anchor" href="#Using-a-lossless-video-codec-for-archiving-monochrome-scientific-video-data">¶</a><a href="https://superuser.com/questions/1247683/using-a-lossless-video-codec-for-archiving-monochrome-scientific-video-data" target="_blank" rel="noopener">Using a lossless video codec for archiving (monochrome) scientific video data</a></h3>
<p>FFmpeg suggest that <code>FFV 1</code> is a suitable format for video storage. Refer to <a href="https://trac.ffmpeg.org/wiki/Encode/FFV1" target="_blank" rel="noopener">website</a>.</p>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline-block; vertical-align: top;"><a href="https://blog.csdn.net/leixiaohua1020/article/details/15811977" target="_blank" rel="noopener">Blog from CSDN</a> this is the most recommended learning material</span><a href="#fnref:1" rev="footnote"> ↩</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline-block; vertical-align: top;">https://ffmpeg.org/</span><a href="#fnref:2" rev="footnote"> ↩</a></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">3.</span><span style="display: inline-block; vertical-align: top;">https://blog.csdn.net/leixiaohua1020/article/details/18893769</span><a href="#fnref:3" rev="footnote"> ↩</a></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">4.</span><span style="display: inline-block; vertical-align: top;">https://github.com/feixiao/ffmpeg/blob/master/src/01_ffmpeg.md</span><a href="#fnref:4" rev="footnote"> ↩</a></li><li id="fn:5"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">5.</span><span style="display: inline-block; vertical-align: top;"><a href="https://github.com/FFmpeg/FFmpeg/blob/master/libavutil/pixdesc.c" target="_blank" rel="noopener">Source code of pixel format standard</a></span><a href="#fnref:5" rev="footnote"> ↩</a></li><li id="fn:6"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">6.</span><span style="display: inline-block; vertical-align: top;"><code>ffmpeg -pix_fmts</code></span><a href="#fnref:6" rev="footnote"> ↩</a></li><li id="fn:7"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">7.</span><span style="display: inline-block; vertical-align: top;">https://www.cnblogs.com/azraelly/archive/2013/01/01/2841269.html</span><a href="#fnref:7" rev="footnote"> ↩</a></li><li id="fn:8"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">8.</span><span style="display: inline-block; vertical-align: top;"><a href="https://www.ffmpeg.org/ffmpeg.html" target="_blank" rel="noopener">official document</a></span><a href="#fnref:8" rev="footnote"> ↩</a></li><li id="fn:9"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">9.</span><span style="display: inline-block; vertical-align: top;">Compression for Great Video and Audio: Master Tips and Common Sense</span><a href="#fnref:9" rev="footnote"> ↩</a></li></ol></div></div>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/tutorial/" rel="tag"># tutorial</a>
              <a href="/tags/reference/" rel="tag"># reference</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2020/04/15/server/Owncloud_deployment/" rel="next" title="Owncloud deployment">
      Owncloud deployment <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#"><span class="nav-number">1.</span> <span class="nav-text">FFmpeg Note</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Basic-Knowledge"><span class="nav-number">1.1.</span> <span class="nav-text">Basic Knowledge</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Some-other-reference"><span class="nav-number">1.1.1.</span> <span class="nav-text">Some other reference</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Terms-sup-id-fnref-4-a-href-fn-4-rel-footnote-4-a-sup"><span class="nav-number">1.1.2.</span> <span class="nav-text">Terms4</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mux-demux"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">mux &amp; demux</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#codec"><span class="nav-number">1.1.3.</span> <span class="nav-text">codec</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MPEG-4"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">MPEG-4</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PowerPoint-支持"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">PowerPoint 支持</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Codec-for-windows"><span class="nav-number">1.1.3.3.</span> <span class="nav-text">Codec for windows</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#K-Lite-codec-package"><span class="nav-number">1.1.3.3.1.</span> <span class="nav-text">K-Lite codec package</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MPEG-DVD-筛选器"><span class="nav-number">1.1.4.</span> <span class="nav-text">MPEG&#x2F;DVD 筛选器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#HEVC-视频拓展"><span class="nav-number">1.1.4.0.1.</span> <span class="nav-text">HEVC 视频拓展</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Note"><span class="nav-number">1.1.4.0.2.</span> <span class="nav-text">Note</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MPEG-4-标准实现"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">MPEG-4  标准实现</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pixel-format-sup-id-fnref-5-a-href-fn-5-rel-footnote-5-a-sup"><span class="nav-number">1.1.5.</span> <span class="nav-text">Pixel format5</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#yuv420p"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">yuv420p</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pal8"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">pal8</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FFmpeg-basic"><span class="nav-number">1.2.</span> <span class="nav-text">FFmpeg basic</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Some-facts"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">Some facts</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Generic-options"><span class="nav-number">1.2.1.</span> <span class="nav-text">Generic options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Main-options"><span class="nav-number">1.2.2.</span> <span class="nav-text">Main options</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Video-options"><span class="nav-number">1.2.3.</span> <span class="nav-text">Video options</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Common-commands"><span class="nav-number">1.3.</span> <span class="nav-text">Common commands</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Images"><span class="nav-number">1.3.1.</span> <span class="nav-text">Images</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Video"><span class="nav-number">1.3.2.</span> <span class="nav-text">Video</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Recommended-video-bitrates-for-SDR-uploads"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">Recommended video bitrates for SDR uploads</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Recommended-video-bitrates-for-HDR-uploads"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">Recommended video bitrates for HDR uploads</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PPT-compatible-video"><span class="nav-number">1.3.3.</span> <span class="nav-text">PPT compatible video</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MPEG-4-v2"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">MPEG-4</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#H-265"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">H.265</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Filter"><span class="nav-number">1.3.4.</span> <span class="nav-text">Filter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Refence-in-this-chapter"><span class="nav-number">1.3.5.</span> <span class="nav-text">Refence in this chapter</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Outlook"><span class="nav-number">1.4.</span> <span class="nav-text">Outlook</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ref"><span class="nav-number">1.5.</span> <span class="nav-text">Ref</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Appendix"><span class="nav-number">1.6.</span> <span class="nav-text">Appendix</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Windows-media-player-音频编码解码器"><span class="nav-number">1.6.1.</span> <span class="nav-text">Windows media player 音频编码解码器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-a-lossless-video-codec-for-archiving-monochrome-scientific-video-data"><span class="nav-number">1.6.2.</span> <span class="nav-text">Using a lossless video codec for archiving (monochrome) scientific video data</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KY</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KY</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  

  

</body>
</html>
